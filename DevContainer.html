<div class="image-wrapper"
style="background-color: black; padding: 5px;">
<figure>
<img src="images/Catena%20Logo_PMS2191%20&amp;%20White.png"
style="width: 100%;" alt="Catena Logo" />
<figcaption aria-hidden="true">Catena Logo</figcaption>
</figure>
</div>
<h1 id="setting-up-a-development-container">Setting Up a Development
Container</h1>
<h2 id="file-break-down">file break down</h2>
<h3 id="docker-containers">docker containers</h3>
<ul>
<li>a base toolchain</li>
<li><ul>
<li>this has all the tools needed to build Catena</li>
</ul></li>
<li>a dev container</li>
<li><ul>
<li>this has Catena and has been built once</li>
</ul></li>
<li><ul>
<li>this is setup for uses as a dev container</li>
</ul></li>
<li>a service container</li>
<li><ul>
<li>this container is a minifide compiled version of Cantena</li>
</ul></li>
</ul>
<h3 id="toolchain">toolchain</h3>
<p>the toolchain is generated from a docker file installing tools
defined in <a
href="https://github.com/rossvideo/Catena/blob/develop/.devcontainer/toolchain-cpp.dockerfile">toolchain-cpp.dockerfile</a><br />
The version of each tool is defined in <a
href="https://github.com/rossvideo/Catena/blob/develop/.devcontainer/toolchain-cpp.env">toolchain-cpp.env</a></p>
<h3 id="devcontainer.json">devcontainer.json</h3>
<ul>
<li>this is the settings for vscode / curser to use when creating the
dev container</li>
</ul>
<h2 id="setup">Setup</h2>
<ol type="1">
<li><p>Install wsl</p></li>
<li><p>Install the Dev container extension on your host systems vscode /
curser</p></li>
</ol>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">code</span> <span class="at">--install-extension</span> ms-vscode-remote.remote-containers</span></code></pre></div>
<ol start="3" type="1">
<li>Run Powershell script to generate WSL ubuntu instance and setup
docker</li>
</ol>
<div class="sourceCode" id="cb2"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="bu">.</span><span class="dt">\w</span>sl.ps1 <span class="va">$USERNAME</span> <span class="va">$GITHUB_SIGNING_NAME</span> <span class="va">$ROSS_EMAIL</span></span></code></pre></div>
<ol start="4" type="1">
<li>Setup docker inside WSL</li>
</ol>
<p>From inside Cursor,</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">CTRL</span> + SHIFT + P <span class="at">-</span><span class="op">&gt;</span> Dev Containers: Rebuild without cache and Reopen in Container</span></code></pre></div>
<p>Once that finishes, as instructed by the terminal, close cursor<br />
Run command from Powershell</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">wsl</span> <span class="at">-d</span> CatenaUbuntu</span></code></pre></div>
<p>from inside the WSL shell</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ~/Catena</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="ex">code</span> .</span></code></pre></div>
<p>From inside Cursor,</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">CTRL</span> + SHIFT + P <span class="at">-</span><span class="op">&gt;</span> Dev Containers: Rebuild without cache and Reopen in Container</span></code></pre></div>
<ol start="5" type="1">
<li>Setup ninja builds</li>
</ol>
<p>From inside the WSL shell in Cursor</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span>  ~/Catena/build/cpp</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cmake</span> <span class="at">-G</span> Ninja <span class="at">-DCMAKE_BUILD_TYPE</span><span class="op">=</span><span class="va">$CMAKE_BUILD_TYPE</span> <span class="at">-DCONNECTIONS</span><span class="op">=</span><span class="va">$CONNECTIONS</span> <span class="at">-DCMAKE_CXX_FLAGS</span><span class="op">=</span><span class="st">&quot;--coverage&quot;</span> <span class="at">-DCMAKE_C_FLAGS</span><span class="op">=</span><span class="st">&quot;--coverage&quot;</span> <span class="at">-DCMAKE_EXE_LINKER_FLAGS</span><span class="op">=</span><span class="st">&quot;--coverage&quot;</span> <span class="at">-DCMAKE_INSTALL_PREFIX</span><span class="op">=</span>/usr/local/.local <span class="at">-DCMAKE_EXPORT_COMPILE_COMMANDS</span><span class="op">=</span>TRUE <span class="at">-DGLOG_LOGGING_DIR</span><span class="op">=</span><span class="va">${HOME}</span>/Catena/logs <span class="at">-B</span> ~/Catena/<span class="va">${BUILD_TARGET}</span> ~/Catena/sdks/cpp</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="ex">ninja</span> clean</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="ex">ninja</span></span></code></pre></div>
<ol start="6" type="1">
<li>your good to dev now :D</li>
</ol>
<div style="text-align: center">
<p><a href="DevProcess.html">Next Page: Device Development
Process</a></p>
</div>
